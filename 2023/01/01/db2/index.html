<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="数据库系统——综合篇, Argithun&#39;s Blog">
    <meta name="description" content="计算机科学与技术专业的学生博客，记录课设、科研和实习项目的心得，欢迎任何技术层面的探讨~">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>数据库系统——综合篇 | Argithun&#39;s Blog</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Argithun's Blog" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Argithun&#39;s Blog</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Argithun&#39;s Blog</div>
        <div class="logo-desc">
            
            计算机科学与技术专业的学生博客，记录课设、科研和实习项目的心得，欢迎任何技术层面的探讨~
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/Argithun" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/Argithun" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('https://argithun-blog-1321510384.cos.ap-beijing.myqcloud.com/db2_1.png')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">数据库系统——综合篇</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="container content">

    
    <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">
                                <span class="chip bg-color">数据库</span>
                            </a>
                        
                            <a href="/tags/SQL/">
                                <span class="chip bg-color">SQL</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" class="post-category">
                                数据库
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2023-01-01
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="数据库系统——综合篇"><a href="#数据库系统——综合篇" class="headerlink" title="数据库系统——综合篇"></a>数据库系统——综合篇</h1><h2 id="第一章-绪论"><a href="#第一章-绪论" class="headerlink" title="第一章 绪论"></a>第一章 绪论</h2><h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><ul>
<li>数据：描述现实世界中各种事物的可以识别的符号。</li>
<li>信息：一种已经被加工为特定形式的数据。数据只有被加工为信息才有价值。<ul>
<li>信息是各种数据所包括的意义。</li>
<li>数据是信息的载体，是信息的具体表现形式。</li>
</ul>
</li>
<li>数据处理：从大量原始数据抽取和推导有价值信息的加工过程。包括：数据收集、组织、存储、加工、分类、检索、输出、传输等操作。</li>
<li>数据管理：数据处理一般性的基本操作，研究专门的技术——数据库管理技术。</li>
<li>数据库技术：按照某种数据结构对数据进行组织，将数据存储在计算机的二级存储中，并可以提供数据共享操作的数据管理技术。</li>
</ul>
<h3 id="什么是数据库系统"><a href="#什么是数据库系统" class="headerlink" title="什么是数据库系统"></a>什么是数据库系统</h3><p>建立在数据库管理系统之上，以满足实际应用需求的数据管理（组织、存储、使用）为主要功能的计算机软件系统。</p>
<h3 id="数据管理技术的发展"><a href="#数据管理技术的发展" class="headerlink" title="数据管理技术的发展"></a>数据管理技术的发展</h3><h4 id="人工管理阶段"><a href="#人工管理阶段" class="headerlink" title="人工管理阶段"></a>人工管理阶段</h4><ul>
<li>时间：20世纪50年代中期以前</li>
<li>背景：外存只有磁带、卡片、纸带等，没有磁盘等直接存取设备，没有OS。</li>
<li>特点：<ul>
<li>数据不在计算机上保存。</li>
<li>没有软件系统对数据进行管理。程序规定数据的逻辑结构与物理结构，程序与数据不具备独立性。</li>
<li>没有文件的概念，数据组织方式必须由程序员设计。</li>
<li>一组数据对应一个程序，数据是面向应用的，程序间不能共享数据。</li>
</ul>
</li>
</ul>
<h4 id="文件系统阶段"><a href="#文件系统阶段" class="headerlink" title="文件系统阶段"></a>文件系统阶段</h4><ul>
<li>时间：20世纪50年代后期到60年代中期。</li>
<li>背景：有磁盘、有文件系统。</li>
<li>特点：<ul>
<li>以文件形式保存在外存上。</li>
<li>文件多样化。</li>
<li>数据的存取基本上以记录为单位。</li>
<li>程序和数据有一定的独立性。</li>
<li>缺点：<ul>
<li>数据冗余度大，浪费空间并且易造成数据的不一致性。</li>
<li>数据和程序缺乏独立性。</li>
<li>不能反映现实世界事物之间的关系。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="数据库系统阶段"><a href="#数据库系统阶段" class="headerlink" title="数据库系统阶段"></a>数据库系统阶段</h4><ul>
<li>时间：20世纪60年代后期开始</li>
<li>背景：有了大容量磁盘、光盘，计算机管理数据量大，关系复杂，共享性要求强。</li>
<li>&#x3D;&#x3D;特点：&#x3D;&#x3D;<ul>
<li>面向全组织的复杂的数据结构，不仅描述数据本身，还描述联系，使得整个组织<strong>结构化</strong>。&#x3D;&#x3D;<strong>数据结构化是数据库与文件系统的根本区别。</strong>&#x3D;&#x3D;</li>
<li>数据冗余度小，易扩充。</li>
<li>具有较高的数据和程序独立性。<ul>
<li><strong>数据物理独立性：存储结构改变时，逻辑结构可以不变。</strong></li>
<li><strong>数据逻辑独立性：逻辑结构改变时，应用程序可以不变。</strong></li>
</ul>
</li>
<li>提供了两方面映像功能（<strong>映像功能实现数据的独立性</strong>）：<ul>
<li>存储结构与逻辑结构映像——实现物理独立性。</li>
<li>全局逻辑结构与某类应用所涉及的局部逻辑结构之间的映像——实现逻辑独立性。</li>
</ul>
</li>
<li>统一的数据控制功能。<ul>
<li>数据安全性控制。</li>
<li>数据完整性控制。</li>
<li>并发控制。</li>
<li>数据库恢复。</li>
</ul>
</li>
<li>数据的最小存取单位是数据项。</li>
</ul>
</li>
</ul>
<h3 id="数据库系统的组成"><a href="#数据库系统的组成" class="headerlink" title="数据库系统的组成"></a>数据库系统的组成</h3><ul>
<li>数据库：数据库中存储的数据是集成的、共享的。</li>
<li>用户：存储、维护和检索数据的各类请求。分为三类：<ul>
<li>终端用户</li>
<li>应用程序员</li>
<li>数据库管理员</li>
</ul>
</li>
<li>软件：包括DBMS和各种应用系统。</li>
<li>硬件：存储数据库和运行DBMS的硬件资源，如内存、外存。</li>
</ul>
<h3 id="数据模型"><a href="#数据模型" class="headerlink" title="数据模型"></a>数据模型</h3><p>数据模型用来抽象和表示现实世界中的数据和信息。</p>
<p>在数据库中，模型分为两类：**&#x3D;&#x3D;概念模型和数据模型&#x3D;&#x3D;**。</p>
<h4 id="数据模型的层次"><a href="#数据模型的层次" class="headerlink" title="数据模型的层次"></a>数据模型的层次</h4><p>现实世界 —— 信息世界（概念模型） —— 机器世界（数据模型）</p>
<ul>
<li>数据模型：按计算机系统的观点对数据建模。</li>
<li>概念模型：现实世界到信息世界的抽象，是用户和数据库设计人员进行交流的语言。</li>
</ul>
<h4 id="概念模型"><a href="#概念模型" class="headerlink" title="&#x3D;&#x3D;概念模型&#x3D;&#x3D;"></a>&#x3D;&#x3D;概念模型&#x3D;&#x3D;</h4><p>基于信息世界的主要概念，表达应用中的各种语义。具有较强的语义表达能力，能够方便、直接表达应用中的各种语义。应该简单、清晰、易于理解。</p>
<h5 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h5><ul>
<li>实体：客观存在并可以相互区分的事物。</li>
<li>属性：实体所具有的某一特性。</li>
<li>码：唯一标识实体的属性集。</li>
<li>域：某个（某些）属性的取值范围。</li>
<li>实体型：表示一类实体，用实体名称与属性名集合来抽象刻画。</li>
<li>联系：实体之间的联系，有名称、类型（3种），并且可以具有属性。</li>
</ul>
<h5 id="ER图"><a href="#ER图" class="headerlink" title="ER图"></a>ER图</h5><p>组成包含：实体、联系、属性。</p>
<ul>
<li>实体：长方形。</li>
<li>属性：椭圆形，用无向边连接属性。</li>
<li>联系：菱形，用无向边连接有关的实体，并在边上标注联系类型。</li>
<li>一些说明：<ul>
<li>同一个实体集内部各实体可以有一对一、一对多和多对多联系。</li>
<li>三个或以上的实体可能具有联系。</li>
<li>两个实体之间可能有多种联系。</li>
</ul>
</li>
</ul>
<h4 id="数据模型-1"><a href="#数据模型-1" class="headerlink" title="数据模型"></a>数据模型</h4><h5 id="三要素"><a href="#三要素" class="headerlink" title="&#x3D;&#x3D;三要素&#x3D;&#x3D;"></a>&#x3D;&#x3D;三要素&#x3D;&#x3D;</h5><ul>
<li>数据结构：由描述数据对象以及对象之间的联系的一组概念组成。是<strong>静态特性</strong>的描述，是<strong>刻画数据模型最重要的方面</strong>。<ul>
<li>描述对象的类型、内容和性质的概念，如域、属性。</li>
<li>描述对象之间联系的概念，如关系。</li>
</ul>
</li>
<li>数据操作：是对数据库中各种数据对象的实例允许执行的操作集合，包括操作以及操作规则。是数据模型的<strong>动态特性</strong>的描述。数据库主要有<strong>检索</strong>和<strong>更新</strong>两大类操作。</li>
<li>完整性约束：完整性规则的集合，是给定数据模型中<strong>数据及其联系所有的制约和依存规则</strong>，用以<strong>保证数据正确、相容</strong>。</li>
</ul>
<h5 id="分类"><a href="#分类" class="headerlink" title="&#x3D;&#x3D;分类&#x3D;&#x3D;"></a>&#x3D;&#x3D;分类&#x3D;&#x3D;</h5><ul>
<li>层次模型：树结构，用有向树表示一对多联系。<ul>
<li>特点：有且仅有一个结点没有双亲，其他节点仅有一个双亲。</li>
<li>优点：结构简单易于实现。</li>
<li>缺点：支持联系种类太少，数据操纵不方便。</li>
<li>代表：IBM的IMS数据库。</li>
</ul>
</li>
<li>网状模型：图结构，用有向图表示一对多联系。<ul>
<li>特点：可以有一个以上结点没有双亲，至少有一个结点有多于一个双亲。表达的联系种类丰富，结构复杂。</li>
</ul>
</li>
<li>关系模型：二维表<ul>
<li>特点：用关系描述实体与实体间的联系，可直接表示多对多联系，关系必须是规范化关系（不允许表套表），必须建立在数学概念基础上。</li>
</ul>
</li>
</ul>
<h3 id="数据库系统的结构"><a href="#数据库系统的结构" class="headerlink" title="数据库系统的结构"></a>数据库系统的结构</h3><p><strong>&#x3D;&#x3D;三级模式、两级映像。&#x3D;&#x3D;</strong></p>
<h4 id="模式"><a href="#模式" class="headerlink" title="模式"></a>模式</h4><p><strong>数据库中全体数据的逻辑结构和特性的描述。</strong></p>
<p>是三级模式的核心，不涉及物理存储细节，与具体应用程序和编程语言无关。</p>
<p>用模式DDL写出的一个数据库逻辑定义的全部语句称为某个数据库的模式。</p>
<h4 id="外模式"><a href="#外模式" class="headerlink" title="外模式"></a>外模式</h4><p>个别用户的数据视图，即<strong>与某一应用有关的数据的逻辑表示</strong>。通常是模式的子集，一个应用只能启用一个外模式。数据库提供外模式描述语言定义外模式。</p>
<h4 id="内模式"><a href="#内模式" class="headerlink" title="内模式"></a>内模式</h4><p>称为存储模式，是数据在数据库系统内部的表示，即<strong>对数据的物理结构和存储方式的描述</strong>。</p>
<h4 id="两级映象"><a href="#两级映象" class="headerlink" title="两级映象"></a>两级映象</h4><ul>
<li>外模式&#x2F;模式映象定义某个外模式与模式之间的对应关系，当模式改变时，映像做出改变就可以保证外模式不变。——**&#x3D;&#x3D;数据的逻辑独立性&#x3D;&#x3D;**</li>
<li>模式&#x2F;内模式映象定义数据逻辑结构与存储结构之间的对应关系，内模式改变时，修改该映象可以使得模式保持不变。——**&#x3D;&#x3D;数据的物理独立性&#x3D;&#x3D;**</li>
</ul>
<h4 id="三级模式结构的优点"><a href="#三级模式结构的优点" class="headerlink" title="三级模式结构的优点"></a>三级模式结构的优点</h4><ul>
<li>保证数据的独立性</li>
<li>简化用户接口，方便用户使用</li>
<li>有利于数据共享</li>
<li>有利于数据的安全保密</li>
</ul>
<h3 id="DBMS"><a href="#DBMS" class="headerlink" title="DBMS"></a>DBMS</h3><h4 id="主要功能"><a href="#主要功能" class="headerlink" title="主要功能"></a>主要功能</h4><ul>
<li>数据库定义功能：提供DDL语言描述外模式、模式和内模式，模式翻译程序把原模式翻译成目标模式，存入数据字典。</li>
<li>数据存取功能：提供DML语言进行增删查改。</li>
<li>数据库运行管理：并发控制、存取控制、完整性约束条件检查和执行……</li>
<li>数据组织、存储和管理</li>
<li>数据库的建立和维护</li>
</ul>
<h4 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h4><ul>
<li>语言编译处理程序</li>
<li>系统运行控制程序</li>
<li>系统建立和维护程序</li>
<li>数据字典</li>
</ul>
<h2 id="第二章-关系数据库"><a href="#第二章-关系数据库" class="headerlink" title="第二章 关系数据库"></a>第二章 关系数据库</h2><h3 id="关系的数学定义"><a href="#关系的数学定义" class="headerlink" title="关系的数学定义"></a>关系的数学定义</h3><ul>
<li>域</li>
<li>元组和分量</li>
<li>关系：笛卡尔积$D_1 * D_2 * …$的子集叫做在域$D_1 * D_2 * …$上的关系，用$R(D_1, D_2, …)$表示。$n$是关系的度或目（$degree$）。</li>
</ul>
<h3 id="关系数据模型"><a href="#关系数据模型" class="headerlink" title="&#x3D;&#x3D;关系数据模型&#x3D;&#x3D;"></a>&#x3D;&#x3D;关系数据模型&#x3D;&#x3D;</h3><h4 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h4><ul>
<li>关系模型的&#x3D;&#x3D;数据结构&#x3D;&#x3D;——关系。</li>
<li>码<ul>
<li>候选码：关系中的某一个属性组，若它唯一标识元组并具有最小性则为候选码。</li>
<li>主码：选定一个候选码为主码。</li>
</ul>
</li>
<li>主属性：码中的属性。</li>
<li>非主属性：不在码中的属性。</li>
<li>关系模式：$R(U, D, dom, F, I)$，简记作$R(A_1, A_2,\dots,A_n)$。关系式关系模式在某一时刻的状态或内容。关系模式是相对稳定的，关系是动态的。</li>
<li>语义约束：<ul>
<li>&#x3D;&#x3D;实体完整性&#x3D;&#x3D;：要有属性或属性组合作为主码，主码不能为空或部分为空。</li>
<li>&#x3D;&#x3D;参照完整性&#x3D;&#x3D;：<ul>
<li>外码：某个R的属性（组）与另外一个基本关系S的主码对应，即为外码。R为参照关系，S为被参照关系（目标关系）。</li>
<li>参照完整性：外码或者等于S的主码，或者为空。</li>
</ul>
</li>
<li>用户定义完整性</li>
</ul>
</li>
</ul>
<h4 id="数据操作"><a href="#数据操作" class="headerlink" title="数据操作"></a>数据操作</h4><ul>
<li><p>特点：集合操作，操作对象都是集合。</p>
</li>
<li><p>基础：关系运算，分为代数方式和逻辑方式。</p>
<ul>
<li><p>关系代数</p>
</li>
<li><p>关系演算</p>
<ul>
<li>元组关系演算</li>
<li>域关系演算</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="关系代数"><a href="#关系代数" class="headerlink" title="关系代数"></a>关系代数</h3><p>共有9种：</p>
<ul>
<li>常规集合运算：并、差、交、广义笛卡尔积。</li>
<li>特有关系运算：选择、投影、连接、自然连接、求商。</li>
</ul>
<h4 id="传统集合运算"><a href="#传统集合运算" class="headerlink" title="传统集合运算"></a>传统集合运算</h4><p>是二目运算，除了笛卡尔积外，要求参加运算的两个关系必须是同类关系。</p>
<ul>
<li>并：将R和S的元组统一到一个集合。</li>
<li>差：从R中剔除S中存在的元组。</li>
<li>交：R和S的共同元组。</li>
<li>广义笛卡尔积：将R和S的元组并列。</li>
</ul>
<h4 id="专门的关系运算"><a href="#专门的关系运算" class="headerlink" title="专门的关系运算"></a>专门的关系运算</h4><ul>
<li>选择：在R中选择出满足条件的元组，记作$\sigma_F(R) &#x3D; {t|t∈R,F(t)&#x3D;true}$。</li>
<li>投影：从R中选出若干属性删除重复的行，记作$\pi_A(R)&#x3D;{t[A]|t∈R,A\sube U}$。</li>
<li>连接：R和S在属性X和Y上的连接（X，Y是连接属性，即X和Y包含同等数量的属性，且相应属性有共同的域），是从两个关系的广义笛卡尔积里选出满足比较条件θ的元组，记作 $R⋈S_{X \theta Y}&#x3D;{t|t&#x3D;&lt;r,s&gt;\and s∈S\and r∈R\and r[X]\theta r[Y]}$。</li>
<li>自然连接：在相同属性列取值相等为条件的连接，要去掉重复属性列。</li>
<li>除法：关系S的属性是关系R属性的子集，记为$R\div S&#x3D;{t|t∈\pi_X(R)\and s∈S\and &lt;t,s&gt;∈R}$。（结果包含S中没有的属性）</li>
</ul>
<h3 id="关系演算"><a href="#关系演算" class="headerlink" title="关系演算"></a>关系演算</h3><h4 id="元组关系演算"><a href="#元组关系演算" class="headerlink" title="元组关系演算"></a>元组关系演算</h4><p>基本结构是元组演算表达式。</p>
<h4 id="域关系演算"><a href="#域关系演算" class="headerlink" title="域关系演算"></a>域关系演算</h4><p>类似于元组演算，公式中的变量对应元组各个分量的域变量。</p>
<h3 id="关系运算的安全约束"><a href="#关系运算的安全约束" class="headerlink" title="关系运算的安全约束"></a>关系运算的安全约束</h3><p>不产生无限关系和无穷验证的运算成为安全运算，其表达式称为安全表达式，对其采取的限制称为安全约束。</p>
<h3 id="数据库数据语言"><a href="#数据库数据语言" class="headerlink" title="数据库数据语言"></a>数据库数据语言</h3><ul>
<li>DDL：数据定义（描述）语言</li>
<li>DML：数据操纵语言，检索、插入、修改、删除。<ul>
<li>联机交互方式</li>
<li>宿主语言方式</li>
</ul>
</li>
<li>DCL：数据控制语言，完成安全性控制、完整性控制、并发控制等。</li>
<li>关系数据语言特点：<ul>
<li>一体化</li>
<li>非过程化</li>
<li>面向集合的存取方式</li>
<li>既可以独立使用又可以与主语言嵌套使用</li>
</ul>
</li>
</ul>
<h2 id="第三章-关系数据库标准语言SQL"><a href="#第三章-关系数据库标准语言SQL" class="headerlink" title="&#x3D;&#x3D;第三章 关系数据库标准语言SQL&#x3D;&#x3D;"></a>&#x3D;&#x3D;第三章 关系数据库标准语言SQL&#x3D;&#x3D;</h2><h3 id="SQL的特点"><a href="#SQL的特点" class="headerlink" title="&#x3D;&#x3D;SQL的特点&#x3D;&#x3D;"></a>&#x3D;&#x3D;SQL的特点&#x3D;&#x3D;</h3><ul>
<li>综合统一</li>
<li>高度非过程化</li>
<li>面向集合</li>
<li>以同一种语法结构提供两种使用方式</li>
<li>语言简捷、易学易用</li>
</ul>
<h3 id="基本概念-1"><a href="#基本概念-1" class="headerlink" title="基本概念"></a>基本概念</h3><ul>
<li>基本表：实际存在的</li>
<li>导出表：有视图（虚表）和快照。</li>
</ul>
<h3 id="检索"><a href="#检索" class="headerlink" title="&#x3D;&#x3D;检索&#x3D;&#x3D;"></a>&#x3D;&#x3D;检索&#x3D;&#x3D;</h3><ul>
<li>SELECT A FROM B：对应不去重的投影操作。</li>
<li>SELECT DISTINCT A FROM B：对应投影。</li>
<li>SELECT A FROM B WHERE C &#x3D; D：选取检索，可以用AND、OR或NOT连接条件&#x3D;，&lt;&gt;，&gt;，&gt;&#x3D;，&lt;，&lt;&#x3D;。可以使用BETWEEN a AND b表示某个区间。</li>
<li>SELECT A FROM B WHERE C &#x3D; D ORDER BY A ASC：对A升序排列，如果降序可以写DESC。</li>
<li>WHERE后可以指明连接条件，选择需要的若干列。</li>
<li>外连接：<code>SELECT * FROM S, SC WHERE S.S#=SC.S#(*)</code></li>
<li>子查询：<ul>
<li>如果返回单值，可以直接用比较运算。</li>
<li>如果返回了多值，必须在比较运算符和子查询之间加入ANY或ALL。</li>
<li>IN与&#x3D;ANY是等价的，NOT IN与!&#x3D;ALL是等价的。</li>
<li>EXISTS：在子查询结果非空时为真。</li>
<li>NOT EXISTS：子查询结果为空时为真。</li>
</ul>
</li>
<li>并：UNION</li>
<li>交：INTERSECT</li>
<li>差：MINUS</li>
<li>COUNT：按列值记个数，COUNT(*)对行记数。</li>
<li>SUM：对数值列求和。</li>
<li>AVG：求数值列平均值。</li>
<li>MAX：求列的最大值。</li>
<li>MIN：求列的最小值。</li>
<li>GROUP BY A [HAVING B &#x3D; C]。</li>
</ul>
<h3 id="表操作"><a href="#表操作" class="headerlink" title="表操作"></a>表操作</h3><h4 id="定义基本表"><a href="#定义基本表" class="headerlink" title="定义基本表"></a>定义基本表</h4><p><code>CREATE TABLE table_name (S# char(5) not null unique, SN char(20) not null, SA int, primary key(S#), check(SA &gt;= 18))</code></p>
<h4 id="修改基本表"><a href="#修改基本表" class="headerlink" title="修改基本表"></a>修改基本表</h4><p><code>ALTER TABLE table_name [ADD &lt;新列名&gt;&lt;数据类型&gt;][DROP&lt;完整性约束名&gt;][MODIFY&lt;列名&gt;&lt;数据类型&gt;]</code></p>
<h4 id="删除基本表"><a href="#删除基本表" class="headerlink" title="删除基本表"></a>删除基本表</h4><p><code>DROP TABLE table_name</code></p>
<h4 id="定义视图"><a href="#定义视图" class="headerlink" title="定义视图"></a>定义视图</h4><p><code>CREATE VIEW view_name AS (SELECT ...)</code></p>
<ul>
<li>视图消解：将视图定义的子查询和用户查询结合，转换成对基本表的查询。</li>
<li>视图作用：<ul>
<li>检化用户操作</li>
<li>使用户能够以多种角度看待同一数据</li>
<li>提供一定程度的逻辑独立性</li>
<li>能够对数据提供安全保护</li>
</ul>
</li>
</ul>
<h3 id="数据更新"><a href="#数据更新" class="headerlink" title="数据更新"></a>数据更新</h3><h4 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h4><p><code>INSERT INTO table_name ([&lt;属性列&gt;&#123;,&lt;属性列&gt;&#125;]) VALUES(&lt;值&gt;&#123;,&lt;值&gt;&#125;)</code></p>
<h4 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h4><p><code>UPDATE table_name SET &lt;列名&gt;=&lt;表达式&gt;</code></p>
<h4 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h4><p><code>DELETE FROM table_name [WHERE &lt;条件&gt;]</code></p>
<h3 id="嵌入式SQL"><a href="#嵌入式SQL" class="headerlink" title="嵌入式SQL"></a>嵌入式SQL</h3><p>把SQL的最佳特性与程序设计语言的最佳特性结合，使SQL功能更强，灵活性更强。</p>
<p>预编译法：把嵌入在程序中的SQL语句翻译为高级语言源码，然后按主语言的通常方式进行编译、链接生成可执行代码。</p>
<h3 id="动态SQL"><a href="#动态SQL" class="headerlink" title="动态SQL"></a>动态SQL</h3><p>允许程序运行过程中临时组装SQL语句，有语句可变、条件可变、数据库对象，查询条件均可变三种形式。</p>
<h3 id="ODBC-JDBC"><a href="#ODBC-JDBC" class="headerlink" title="ODBC&#x2F;JDBC"></a>ODBC&#x2F;JDBC</h3><p>四个组件：应用程序、驱动程序管理器、驱动程序和数据源。</p>
<h2 id="第四章-数据库设计"><a href="#第四章-数据库设计" class="headerlink" title="第四章 数据库设计"></a>第四章 数据库设计</h2><h3 id="数据库设计概述"><a href="#数据库设计概述" class="headerlink" title="数据库设计概述"></a>数据库设计概述</h3><ul>
<li>数据库设计：对于一个给定的应用环境，<strong>设计优化的数据库逻辑和物理结构，建立数据库</strong>，使之能够有效地存储数据，为开发满足用户需求的应用系统奠定基础。</li>
<li>数据库设计的特点：要把<strong>数据设计</strong>和<strong>处理设计</strong>密切结合。</li>
<li>设计方法：<ul>
<li>手工试凑法：根据应用的数据要求与处理要求直接设计数据库的结构。</li>
<li>规范设计法：运用软工思想，<strong>整个设计过程划分为若干阶段，每个阶段只解决整个设计中的部分问题，是迭代和逐步求精的过程</strong>。</li>
</ul>
</li>
</ul>
<h3 id="数据库设计的基本步骤"><a href="#数据库设计的基本步骤" class="headerlink" title="数据库设计的基本步骤"></a>数据库设计的基本步骤</h3><ul>
<li>&#x3D;&#x3D;需求分析&#x3D;&#x3D;：现实世界</li>
<li>&#x3D;&#x3D;概念结构设计&#x3D;&#x3D;：概念模式，生成概念模型，ER图</li>
<li>&#x3D;&#x3D;逻辑结构设计&#x3D;&#x3D;：逻辑模式，生成DBMS支持的数据模型</li>
<li>物理结构设计：内模式，设计存储结构和存取方法</li>
<li>数据库实施</li>
<li>数据库运行维护</li>
</ul>
<h4 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h4><ul>
<li>目标：收集支持系统应用目标的基础数据及其处理。重点是“数据”和“处理”，包括<strong>处理要求，信息要求，安全性与完整性要求</strong>。</li>
<li>两个阶段：调查用户实际要求；分析表达需求，用数据流图和数据字典。</li>
<li>数据流图<ul>
<li>自顶向下逐步分解处理功能以及他们所用的数据。</li>
</ul>
</li>
<li>数据字典：需求分析阶段，可以看成<strong>数据元素表</strong>。<ul>
<li>包含每一个数据元素的名字、含义等各方面的描述。</li>
<li>从数据流图提取出所有原子数据项。</li>
<li>把有联系的数据项组合起来形成数据组。</li>
<li>以数据组为单位写出语义定义、类型定义、完整性约束定义等。</li>
</ul>
</li>
</ul>
<h4 id="概念结构设计"><a href="#概念结构设计" class="headerlink" title="&#x3D;&#x3D;概念结构设计&#x3D;&#x3D;"></a>&#x3D;&#x3D;概念结构设计&#x3D;&#x3D;</h4><p>ER图：参考上面第一章内容。</p>
<h5 id="设计概念结构四类方法"><a href="#设计概念结构四类方法" class="headerlink" title="设计概念结构四类方法"></a>设计概念结构四类方法</h5><ul>
<li>自顶向下</li>
<li>自底向上：最常用</li>
<li>逐步扩张</li>
<li>混合策略</li>
</ul>
<h5 id="数据抽象"><a href="#数据抽象" class="headerlink" title="数据抽象"></a>数据抽象</h5><ul>
<li>分类：定义某一概念作为现实世界中一组对象的类型。</li>
<li>聚集：定义某一类型的组成成分。</li>
<li>概括：定义类型之间的一种子集联系。</li>
</ul>
<h5 id="实体模型的调整原则"><a href="#实体模型的调整原则" class="headerlink" title="实体模型的调整原则"></a>实体模型的调整原则</h5><ul>
<li>属性不能再分，必须是<strong>不可分的数据项</strong>。</li>
<li>属性不能与其他实体有联系。</li>
<li>实体与属性之间保持1:1或n:1联系，不满足的情况可以将属性上升为实体。</li>
</ul>
<h5 id="集成局部ER图"><a href="#集成局部ER图" class="headerlink" title="集成局部ER图"></a>集成局部ER图</h5><ul>
<li>合并：解决各分ER图之间的冲突，将各分ER图合并成初步ER图。冲突主要包括属性冲突、命名冲突和结构冲突。</li>
<li>修改和重构：消除冗余生成基本ER图。</li>
</ul>
<h5 id="设计基本ER图"><a href="#设计基本ER图" class="headerlink" title="设计基本ER图"></a>设计基本ER图</h5><ul>
<li>消除冗余，可能存在冗余数据或冗余联系。</li>
</ul>
<h4 id="逻辑结构设计"><a href="#逻辑结构设计" class="headerlink" title="逻辑结构设计"></a>逻辑结构设计</h4><p>把概念结构转换为选用的DBMS所支持的数据模型。</p>
<h5 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h5><ul>
<li>概念结构根据转换规则生成一般数据模型。</li>
<li>根据关系数据理论，进行规范化。</li>
<li>生成特定DBMS支持下的数据模型。</li>
<li>优化数据模型。</li>
</ul>
<h4 id="物理结构设计"><a href="#物理结构设计" class="headerlink" title="物理结构设计"></a>物理结构设计</h4><ul>
<li>确定存储结构：索引、聚集、hash。</li>
<li>选择关系的存取方法</li>
</ul>
<h2 id="第五章-关系数据理论"><a href="#第五章-关系数据理论" class="headerlink" title="&#x3D;&#x3D;第五章 关系数据理论&#x3D;&#x3D;"></a>&#x3D;&#x3D;第五章 关系数据理论&#x3D;&#x3D;</h2><h3 id="函数依赖"><a href="#函数依赖" class="headerlink" title="函数依赖"></a>函数依赖</h3><ul>
<li>数据依赖：属性值之间相互依赖又相互制约的关系。最重要的有两种：函数依赖和多值依赖。</li>
</ul>
<h4 id="函数依赖的定义"><a href="#函数依赖的定义" class="headerlink" title="函数依赖的定义"></a>函数依赖的定义</h4><ul>
<li>定义：对于X的每个具体值，Y有唯一的值与之对应，则称X函数确定Y或Y函数依赖于X。（$X\rightarrow Y$）</li>
</ul>
<h4 id="相关术语"><a href="#相关术语" class="headerlink" title="相关术语"></a>相关术语</h4><ul>
<li>平凡函数依赖：$Y\sube X$。</li>
<li>非平凡函数依赖：不是平凡函数依赖。</li>
<li>决定因素：$X$是$X\rightarrow Y$的决定因素。</li>
<li>完全函数依赖：如果有$X\rightarrow Y$且对于任意$X$的真子集$X’$都有$X’\nrightarrow Y$，则是完全函数依赖。</li>
<li>部分函数依赖：不是完全函数依赖的函数依赖。</li>
<li>传递函数依赖：$X\rightarrow Y$且$Y\rightarrow Z$，并且$Y \nrightarrow X$，则称$Z$对$X$传递函数依赖。</li>
</ul>
<h5 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h5><p>函数依赖是语义范畴的概念，不随时间变化。</p>
<h4 id="与联系的关系"><a href="#与联系的关系" class="headerlink" title="与联系的关系"></a>与联系的关系</h4><ul>
<li>1对1：有$X\rightarrow Y$和$Y\rightarrow X$。</li>
<li>1对m：有$Y\rightarrow X$。</li>
<li>n对m：无函数依赖关系。</li>
</ul>
<h4 id="关系键的形式定义"><a href="#关系键的形式定义" class="headerlink" title="关系键的形式定义"></a>关系键的形式定义</h4><ul>
<li>候选码与主码：<ul>
<li>候选码：U完全函数依赖于K。</li>
<li>主码：如果多个候选码，就选一个作为主码。性质有唯一性和最小性。</li>
</ul>
</li>
<li>主属性与非主属性：<ul>
<li>主属性：包含在任何一个候选码中的属性。</li>
<li>非主属性：不是主属性。</li>
</ul>
</li>
<li>外部码：R中的属性或属性组X不是R的码但是是另一个关系模式的码，则X是R的外部码。</li>
</ul>
<h4 id="函数依赖的逻辑蕴涵"><a href="#函数依赖的逻辑蕴涵" class="headerlink" title="函数依赖的逻辑蕴涵"></a>函数依赖的逻辑蕴涵</h4><ul>
<li>从$R&lt;U, F&gt;$中可以推出$X \rightarrow Y$则称为$F$逻辑蕴涵$X \rightarrow Y$。</li>
<li>$F$的闭包：$F$所蕴涵的函数依赖的全体，记作$F^+$。</li>
</ul>
<h4 id="Armstrong公理系统"><a href="#Armstrong公理系统" class="headerlink" title="&#x3D;&#x3D;Armstrong公理系统&#x3D;&#x3D;"></a>&#x3D;&#x3D;Armstrong公理系统&#x3D;&#x3D;</h4><p>对于$R&lt;U, F&gt;$有如下规则：</p>
<ul>
<li>A1自反律：若$Y\sube X\sube U$则$X \rightarrow Y$为$F$所蕴涵。</li>
<li>A2增广律：若$X \rightarrow Y$为$F$所蕴涵，且$Z\sube U$则$XZ\rightarrow YZ$为$F$所蕴涵。</li>
<li>A3传递律：若$X \rightarrow Y$且$Y \rightarrow Z$为$F$所蕴涵，则$X \rightarrow Z$为$F$所蕴涵。</li>
</ul>
<h5 id="推论"><a href="#推论" class="headerlink" title="推论"></a>推论</h5><ul>
<li>合并规则：由$X \rightarrow Y$，$Y \rightarrow Z$，有$X \rightarrow YZ$。</li>
<li>伪传递规则：由$X \rightarrow Y$，$WY \rightarrow Z$，有$XW \rightarrow Z$。</li>
<li>分解规则：由$X \rightarrow Y$和$Z \sube Y$，有$X \rightarrow Z$。</li>
<li>定理1：$X \rightarrow A_1 A_2 A_3\dots A_k$成立等价于$X\rightarrow A_i$（i &#x3D; 1, 2, 3…k）成立。</li>
</ul>
<h5 id="属性集闭包"><a href="#属性集闭包" class="headerlink" title="属性集闭包"></a>属性集闭包</h5><ul>
<li>定理：$X \rightarrow Y$可以由$F$根据公理系统导出等价于$Y \sube X_F^+$。</li>
</ul>
<h5 id="公理系统的有效性与完备性"><a href="#公理系统的有效性与完备性" class="headerlink" title="公理系统的有效性与完备性"></a>公理系统的有效性与完备性</h5><ul>
<li>有效性：由F除法根据Armstrong公里推导出来的每一个函数依赖一定在F所蕴涵的函数依赖的全体之中。</li>
<li>完备性：F所蕴涵的函数依赖的全体中的每一个函数依赖，必定可以由F根据Armstrong公理系统导出。</li>
</ul>
<h5 id="求属性闭包的算法"><a href="#求属性闭包的算法" class="headerlink" title="求属性闭包的算法"></a>求属性闭包的算法</h5><ul>
<li>初始，$X_F^+&#x3D;X$，然后把$F$中所有$X_F$下属性能推出的属性都加进去，直到不变或者变为属性全集$U$。</li>
</ul>
<h5 id="函数依赖集等价"><a href="#函数依赖集等价" class="headerlink" title="函数依赖集等价"></a>函数依赖集等价</h5><ul>
<li>若函数依赖集$F^+&#x3D;G^+$，则称F和G等价。</li>
<li>&#x3D;&#x3D;最小函数依赖集&#x3D;&#x3D;条件：<ul>
<li>$F$中任一函数依赖$X \rightarrow A$，$A$必须是单属性。</li>
<li>$F$中不存在$X \rightarrow A$使得$F$与$F-{X\rightarrow A}$等价，即不存在多余的依赖。</li>
<li>$F$中不存在$X \rightarrow A$，在$X$中有真子集$Z$，使得$F$与$F-{X \rightarrow A}∪{Z \rightarrow A}$等价，即左侧不能有多余的属性。</li>
</ul>
</li>
<li>&#x3D;&#x3D;极小化的算法：&#x3D;&#x3D;<ul>
<li>首先将所有$X\rightarrow Y$的$Y$展开。</li>
<li>逐个检查$F$中的函数依赖的左侧，如果左侧是多属性，且删去一个属性后依然可以推出右侧，则能够删掉。形式化为：对于$X \rightarrow A$，设$X&#x3D;B_1\dots B_m$，如果$A∈(X-B_i)^+_F$，则以$(X-B_i)$取代$X$直到$F$不再改变。</li>
<li>逐个检查$F$中的每个函数依赖，如果删掉函数依赖后的$G&#x3D;F-{X\rightarrow A}$，仍然可以有$A∈(X)_G^+$，就删除该函数依赖。</li>
</ul>
</li>
</ul>
<h3 id="范式"><a href="#范式" class="headerlink" title="范式"></a>范式</h3><p>如果一个关系满足某个指定的约束集，则称它属于某种特定的范式（Normal Form）。</p>
<h4 id="1NF"><a href="#1NF" class="headerlink" title="1NF"></a>1NF</h4><p>当一个关系只包含原子值这一约束时，称为1NF。也就是表里每个格只有一个值。满足原子值这一约束条件的关系称为规范化关系简称范式。</p>
<p>一个低一级范式的关系模式，可以通过<strong>模式分解</strong>转换为若干高级范式的关系模式的集合，这个过程称为<strong>规范化</strong>。</p>
<h4 id="2NF"><a href="#2NF" class="headerlink" title="2NF"></a>2NF</h4><ul>
<li>定义：1NF的关系的每个非主属性完全依赖于码，就是2NF。</li>
<li>弊病：<ul>
<li>插入异常有所改善但是仍然存在。</li>
<li>删除异常。</li>
<li>数据冗余得到了一定的改善。</li>
</ul>
</li>
</ul>
<h4 id="3NF"><a href="#3NF" class="headerlink" title="3NF"></a>3NF</h4><p>定义：如果不存在码$X$，属性组$Y$和非主属性$Z(Z不是Y的子集)$，使得下式成立，$X\rightarrow Y$，$Y\rightarrow Z$，$Y \nrightarrow X$，则$R∈3NF$。（2NF的关系模式，每个非主属性都不传递依赖于任何码）</p>
<h4 id="BCNF"><a href="#BCNF" class="headerlink" title="BCNF"></a>BCNF</h4><ul>
<li>所有非主属性都完全函数依赖于每个候选码。</li>
<li>所有主属性都完全函数依赖于每个不包含它的候选码。</li>
<li>没任何属性完全函数依赖于非码的任意一组属性。</li>
</ul>
<h4 id="多值依赖与4NF"><a href="#多值依赖与4NF" class="headerlink" title="多值依赖与4NF"></a>多值依赖与4NF</h4><ul>
<li>多值依赖定义：$Z &#x3D; U - X - Y$，关系模式$R(U)$中多值依赖$X\rightarrow \rightarrow Y$成立，当且仅当对$R(U)$的任一关系r，给定的一对$(x,z)$值有一组$Y$的值，这组值仅仅取决于x值而与z值无关。</li>
<li>多值依赖有对称性，若$X\rightarrow \rightarrow Y$则$X\rightarrow \rightarrow (U-X-Y)$。</li>
<li>$X\rightarrow Y$可以推出$X\rightarrow \rightarrow Y$。</li>
<li>4NF：对于每个非平凡的多值依赖$X\rightarrow \rightarrow Y$且必须是函数依赖，$X$都含有码。</li>
</ul>
<h3 id="规范化目的与基本思想"><a href="#规范化目的与基本思想" class="headerlink" title="规范化目的与基本思想"></a>规范化目的与基本思想</h3><p>在关系数据库中，对关系的最基本要求是满足1NF。</p>
<p>规范化要逐步消除数据依赖中不合适的部分，使数据库模式中各关系模式达到某种程度的“分离”，使一个关系只描述一个实体或者实体间的一种联系，即<strong>“一事一地”</strong>的设计原则。规范化的实质是<strong>概念的单一化</strong>。</p>
<h3 id="模式分解理论"><a href="#模式分解理论" class="headerlink" title="模式分解理论"></a>模式分解理论</h3><h4 id="无损连接性分解判定算法"><a href="#无损连接性分解判定算法" class="headerlink" title="无损连接性分解判定算法"></a>无损连接性分解判定算法</h4><p>$F&#x3D;{FD_1,\dots, FD_p}$</p>
<ul>
<li>如果将n个属性的关系模式分解为k个，先建立n列k行的表TB：<ul>
<li>每一列对应一个属性$A_i$。</li>
<li>每一行对应分解中的一个关系模式$R_i$。</li>
<li>分量的取值：$C_{ij}&#x3D;A_j∈U_i?a_j:b_{ij}$。</li>
</ul>
</li>
<li>对$FD_i$中每一个函数依赖$X\rightarrow Y$，若TB中存在元素t1和t2使，t1[X]&#x3D;t2[X]，则对每一个$A_i∈Y$：<ul>
<li>若$t1[A_i], t2[A_i]$有一个等于ai，则另一个也改为ai。</li>
<li>若上面不成立，就取$t1[A_i]&#x3D;t2[A_i]$。（t1行号小于t2）</li>
</ul>
</li>
<li>反复执行上一步直到：<ul>
<li>TB出现一行为全a，即为无损分解。</li>
<li>TB不变且没有一行为全a，为有损分解。</li>
</ul>
</li>
</ul>
<h4 id="无损分解判定准则"><a href="#无损分解判定准则" class="headerlink" title="无损分解判定准则"></a>无损分解判定准则</h4><p>定理：分解$ρ&#x3D;{R_1&lt;U_1,F_1&gt;,R_2&lt;U_2,F_2&gt;}$具有无损连接性的充分必要条件是，$U_1∩U_2\rightarrow U_1-U_2∈F^+$或$U_1∩U_2\rightarrow U_2-U_1∈F^+$。即$R_1, R_2$的共同属性至少构成$R_1,R_2$两者之一的候选码。</p>
<h4 id="保持函数依赖判定准则"><a href="#保持函数依赖判定准则" class="headerlink" title="保持函数依赖判定准则"></a>保持函数依赖判定准则</h4><p>$R$中的每个函数依赖都能够从$R_1,\dots,R_n$函数依赖的并集中逻辑导出。</p>
<h4 id="模式分解原则"><a href="#模式分解原则" class="headerlink" title="模式分解原则"></a>模式分解原则</h4><ul>
<li>投影分解应遵循的原则：<ul>
<li>具有无损连接性</li>
<li>保持函数依赖</li>
</ul>
</li>
<li>模式分解能够达到的最高范式等级：<ul>
<li>要求保持函数依赖，总可以达到3NF，不一定到BCNF。</li>
<li>要求无损连接，一定可以达到4NF或更高。</li>
<li>要求两者都保持，可以达到3NF，但不一定到BCNF。</li>
</ul>
</li>
</ul>
<h4 id="达到3NF的等价模式分解"><a href="#达到3NF的等价模式分解" class="headerlink" title="达到3NF的等价模式分解"></a>达到3NF的等价模式分解</h4><h5 id="保持函数依赖的分解算法"><a href="#保持函数依赖的分解算法" class="headerlink" title="保持函数依赖的分解算法"></a>保持函数依赖的分解算法</h5><ul>
<li>对F进行极小化。</li>
<li>找出不在F的属性，将它们构成一个关系模式，并且从U中去掉。</li>
<li>若有$X\rightarrow A∈F$，且$XA&#x3D;U$，则$ρ&#x3D;{R}$，算法终止。</li>
<li>对F按具有相同左部的原则分成k组，每一组函数以阿里所涉及的属性全体记为$U_i$，若有$U_i\sube U_j$则去掉$U_i$。令$F_i$为$F$在$U_i$上的投影，则可以获得一个保持函数依赖的分解$ρ&#x3D;{R_1&lt;U_1,F_1&gt;,\dots,R_k&lt;U_k,F_k&gt;}$。</li>
</ul>
<h5 id="同时保持函数依赖和无损连接的分解算法"><a href="#同时保持函数依赖和无损连接的分解算法" class="headerlink" title="同时保持函数依赖和无损连接的分解算法"></a>同时保持函数依赖和无损连接的分解算法</h5><p>设$ρ$是一个保持函数依赖的分解，$X$为$R&lt;U,F&gt;$的码。</p>
<ul>
<li>如果有某个$U_i$满足$X\sube U_i$，则ρ即为所求。</li>
<li>否则令$τ&#x3D;ρ∪{R*&lt;X,F_X&gt;}$，τ即为所求。</li>
</ul>
<h4 id="达到BCNF的无损连接分解算法"><a href="#达到BCNF的无损连接分解算法" class="headerlink" title="达到BCNF的无损连接分解算法"></a>达到BCNF的无损连接分解算法</h4><ul>
<li>令$ρ&#x3D;R&lt;U,F&gt;$。</li>
<li>检查$ρ$中各关系模式是否属于BCNF，若是，则算法终止。</li>
<li>设ρ中的$R_i&lt;U_i,F_i&gt;$不属于BCNF，则存在函数依赖$X\rightarrow A∈F_i^+$，且$X$不是$R_i$的码，则$XA$是$U_i$的真子集，将$R_i$分解为$\sigma&#x3D;{S_1,S_2}$，其中$U_{S_1}&#x3D;XA,U_{S_2}&#x3D;U_i-{A}$，以$\sigma$代替$R_i$返回上一步。</li>
</ul>
<h3 id="候选码的求解"><a href="#候选码的求解" class="headerlink" title="候选码的求解"></a>候选码的求解</h3><h4 id="属性分类"><a href="#属性分类" class="headerlink" title="属性分类"></a>属性分类</h4><ul>
<li>L类：只出现在F函数依赖左侧的属性。</li>
<li>R类：只出现在F函数依赖右侧的属性。</li>
<li>N类：没有出现在函数依赖中的属性。</li>
<li>LR类：在左右均出现的属性。</li>
</ul>
<h4 id="定理"><a href="#定理" class="headerlink" title="定理"></a>定理</h4><ul>
<li>如果X是L类属性，则必是任一候选码的成员。</li>
<li>如果X是R类属性，则X不在R的任何一个候选码中。</li>
<li>如果X是N类属性，则X必包含在任一候选码中。</li>
</ul>
<h4 id="图论判定法"><a href="#图论判定法" class="headerlink" title="图论判定法"></a>图论判定法</h4><p>将函数依赖关系绘制成有向图。</p>
<ul>
<li>入度为0的为原始点，L类。</li>
<li>出度为0的为终结点，R类。</li>
<li>入度出度均不为0的为途中点，LR类。</li>
<li>入度出度均为0的为孤立点，N类。</li>
<li>关键点：原始点和孤立点。</li>
<li>独立回路：不能由其他点到达的回路。</li>
</ul>
<h4 id="定理-1"><a href="#定理-1" class="headerlink" title="定理"></a>定理</h4><ul>
<li>关键点必在R的任何候选码中。</li>
<li>终结点必不在R的任何候选码中。</li>
<li>R具有唯一候选码的充要条件是G中不存在独立回路。</li>
<li>若Y是途中点且Y在独立回路，则Y必在某候选码中。</li>
</ul>
<h4 id="多属性依赖集候选码求解"><a href="#多属性依赖集候选码求解" class="headerlink" title="多属性依赖集候选码求解"></a>多属性依赖集候选码求解</h4><ul>
<li>将所有属性分成L、R、LR和N四类，并令X代表L和N类，Y代表LR类。</li>
<li>求出$X_F^+$，如果是U，则X为唯一候选码，否则继续下一步。</li>
<li>对于Y中任一一个属性A，求$(XA)_F^+$，若为U，则XA为一个候选码，否则在Y中依次取2个、3个，求属性闭包，直到闭包包含R的全部属性。</li>
</ul>
<h3 id="与数据库设计的联系"><a href="#与数据库设计的联系" class="headerlink" title="与数据库设计的联系"></a>与数据库设计的联系</h3><ul>
<li>求最小依赖集消除冗余联系。</li>
<li>一般情况下3NF足以满足要求。</li>
</ul>
<h2 id="第六章-关系查询处理与查询优化（不是重点）"><a href="#第六章-关系查询处理与查询优化（不是重点）" class="headerlink" title="第六章 关系查询处理与查询优化（不是重点）"></a>第六章 关系查询处理与查询优化（不是重点）</h2><h3 id="关系查询处理步骤——四个阶段"><a href="#关系查询处理步骤——四个阶段" class="headerlink" title="关系查询处理步骤——四个阶段"></a>关系查询处理步骤——四个阶段</h3><ul>
<li>查询分析：词法分析，语法检查和语法分析。</li>
<li>查询检查：语义检查，存取权限检查，SQL语句转换为关系代数表达式。</li>
<li>查询优化：选择一个高效的查询处理策略，按照优化的层次分为代数优化和物理优化。</li>
<li>查询执行：生成查询计划，生成执行查询计划的代码。</li>
</ul>
<h3 id="查询优化"><a href="#查询优化" class="headerlink" title="查询优化"></a>查询优化</h3><ul>
<li>目标：选择一个高效的执行查询处理策略，使得查询代价最小。</li>
<li>执行开销：总代价&#x3D;IO代价+CPU代价+内存代价</li>
<li>按照优化层次分为代数优化和物理优化：<ul>
<li>代数优化：改变代数表达式的操作次序和组合。</li>
<li>物理优化：存取路径和底层操作算法选择。</li>
</ul>
</li>
<li>一般步骤：<ul>
<li>把查询转换成语法树，如关系代数语法树。</li>
<li>代数优化语法树。</li>
<li>物理优化，选择存取路径。</li>
<li>生成查询计划。</li>
</ul>
</li>
</ul>
<h3 id="代数优化"><a href="#代数优化" class="headerlink" title="代数优化"></a>代数优化</h3><p>通过对关系代数表达式的等价变化来提高查询效率。</p>
<p>等价：用相同的关系代替两个表达式中相应的关系所得到的结果是相同的。</p>
<ul>
<li>连接和笛卡尔积交换律。</li>
<li>连接和笛卡尔积结合律。</li>
<li>投影串接定律。</li>
<li>选择串接定律。</li>
<li>选择与投影的交换律。</li>
<li>选择与笛卡尔积的交换律。</li>
<li>选择与并的分配律。</li>
<li>选择与差的分配律。</li>
<li>选择对自然连接的分配律。</li>
<li>投影与笛卡尔积的分配律。</li>
<li>投影与并的分配律。</li>
</ul>
<p>查询树的启发式优化：</p>
<ul>
<li>减小中间关系——选择运算早做。</li>
<li>减少扫描关系的次数</li>
<li>把笛卡尔积与选择转换为连接</li>
<li>中间结果复用</li>
</ul>
<h3 id="物理优化"><a href="#物理优化" class="headerlink" title="物理优化"></a>物理优化</h3><p>常用方法：</p>
<ul>
<li>基于规则的启发式优化方法</li>
<li>基于代价估算的优化方法</li>
<li>两者结合的优化方法</li>
</ul>
<p>基于启发式规则的存取路径选择优化：</p>
<ul>
<li>选择操作的启发式规则：<ul>
<li>小关系使用全表顺序扫描。</li>
<li>大关系可以使用索引扫描。</li>
</ul>
</li>
<li>连接操作的启发式规则：<ul>
<li>排序合并</li>
<li>索引连接</li>
<li>hash join</li>
<li>嵌套循环</li>
</ul>
</li>
</ul>
<h2 id="第七章-事务处理技术"><a href="#第七章-事务处理技术" class="headerlink" title="第七章 事务处理技术"></a>第七章 事务处理技术</h2><h3 id="事务的概念"><a href="#事务的概念" class="headerlink" title="事务的概念"></a>事务的概念</h3><h4 id="事务的定义"><a href="#事务的定义" class="headerlink" title="&#x3D;&#x3D;事务的定义&#x3D;&#x3D;"></a>&#x3D;&#x3D;事务的定义&#x3D;&#x3D;</h4><p>事务是用户定义的数据库操作序列，这些操作要么都做，要么都不做。</p>
<ul>
<li>事务与应用程序是两个概念。</li>
<li>事务的开始与结束可以由用户显式控制。</li>
</ul>
<h4 id="事务的特性"><a href="#事务的特性" class="headerlink" title="&#x3D;&#x3D;事务的特性&#x3D;&#x3D;"></a>&#x3D;&#x3D;事务的特性&#x3D;&#x3D;</h4><ul>
<li>原子性：事务中包括的所有操作要么都做，要么都不做。</li>
<li>一致性：事务执行的结果必须是使数据库从一个一致性状态变到另一个一致性状态。</li>
<li>隔离性：一个事务的执行不能被其他事务干扰，一个事务内部的操作及使用的数据对其他并发事务是隔离的，并发执行的事务之间不能互相干扰。</li>
<li>持久性：一个事务一旦提交，它对数据库的影响必须是永久的，其他操作或故障不应该对其执行的结果有任何影响。</li>
</ul>
<p>ACID特性对于数据库数据的正确有效有重要意义。</p>
<ul>
<li>利用数据库并发控制机制以及数据库恢复机制保证事务的特性不被破坏。从而保证数据库数据的正确有效。</li>
<li><strong>事务是数据库恢复和并发控制的基本单位。</strong></li>
</ul>
<h4 id="SQL事务的定义"><a href="#SQL事务的定义" class="headerlink" title="SQL事务的定义"></a>SQL事务的定义</h4><ul>
<li>开始：<code>BEGIN TRANSACTION</code>。</li>
<li>结束：<code>COMMIT</code>或<code>ROLLBACK</code>。</li>
</ul>
<h3 id="数据库恢复技术"><a href="#数据库恢复技术" class="headerlink" title="数据库恢复技术"></a>数据库恢复技术</h3><h4 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h4><p>把数据库从某一错误状态恢复到某一已知的正确状态。</p>
<p>通过<strong>数据库管理系统的恢复子系统</strong>完成。</p>
<h5 id="意义"><a href="#意义" class="headerlink" title="意义"></a>意义</h5><ul>
<li>保证事务原子性。</li>
<li>当系统故障后，使数据库恢复正常状态。</li>
</ul>
<h4 id="故障种类"><a href="#故障种类" class="headerlink" title="故障种类"></a>故障种类</h4><ul>
<li>事务内部故障：<ul>
<li>可预期的：事务根据内部条件来回滚。</li>
<li>不可预期的：不能由应用程序处理，比如死锁、运算溢出、违反完整性规则等。</li>
</ul>
</li>
<li>系统故障：<ul>
<li>造成系统停止运行的任何事情。</li>
<li>使事务都异常终止但不会破坏数据库。</li>
</ul>
</li>
<li>介质故障：<ul>
<li>外存故障。</li>
<li>破坏全部或部分数据库，并影响正在存取这部分数据的所有事务。</li>
</ul>
</li>
<li>计算机病毒：<ul>
<li>数据库主要威胁，人为破坏或故障。</li>
<li>对数据进行非法修改。</li>
</ul>
</li>
</ul>
<p>两种影响：</p>
<ul>
<li>数据库本身被破坏。</li>
<li>数据库没有被破坏但数据可能不正确。</li>
</ul>
<h4 id="恢复的实现技术"><a href="#恢复的实现技术" class="headerlink" title="&#x3D;&#x3D;恢复的实现技术&#x3D;&#x3D;"></a>&#x3D;&#x3D;恢复的实现技术&#x3D;&#x3D;</h4><p>基本原理：<strong>冗余</strong>。</p>
<h5 id="数据转储"><a href="#数据转储" class="headerlink" title="数据转储"></a>数据转储</h5><ul>
<li>概念：DBA定期将整个数据库复制到磁带或另一个磁盘上保存起来的过程，备用数据称为<strong>后备副本或后援副本</strong>。</li>
<li>两种转储状态：<ul>
<li>静态转储：无事务运行时的转储操作。</li>
<li>动态转储：转储期间允许对数据库进行存取或修改。需要用后援副本加上日志文件恢复。</li>
</ul>
</li>
<li>两种转储方式：<ul>
<li>海量转储：每次转储全部数据库。</li>
<li>增量转储：每次只转储上一次转储后更新过的数据。</li>
</ul>
</li>
<li>日志：记录事务对数据库更新操作的文件，分为以记录为单位和以数据块为单位的两种格式。<ul>
<li>作用：事务故障和系统故障恢复必须使用日志文件。</li>
<li>写入规则：先写入日志文件，后写数据库。</li>
</ul>
</li>
</ul>
<h5 id="故障的恢复策略"><a href="#故障的恢复策略" class="headerlink" title="故障的恢复策略"></a>故障的恢复策略</h5><ul>
<li>事务故障的恢复：UNDO，撤销事务，在不影响其他事务的情况下强行回滚。反向扫描日志，执行所有更新操作的逆操作。</li>
<li>系统故障：UNDO+REDO，撤销故障发生时未完成的事务，重做已完成但没有写入数据库的事务。</li>
<li>介质故障：装入最新数据库后备副本，使数据库恢复到最近一次转储时的一致状态。装入转储以后的日志文件副本，重做已经完成的事务。</li>
</ul>
<h5 id="检查点技术"><a href="#检查点技术" class="headerlink" title="检查点技术"></a>检查点技术</h5><p>日志文件天啊及检查点记录，要记下所有正在执行的事务清单和这些事务最近一个日志记录的地址。</p>
<p>增加一个重新开始文件，用来记录各个检查点记录在日志文件中的地址。</p>
<h5 id="数据库镜像"><a href="#数据库镜像" class="headerlink" title="数据库镜像"></a>数据库镜像</h5><p>把整个DB或关键数据复制到另一个磁盘上，由DBMS自动保证镜像数据库与主数据库的一致性。</p>
<h3 id="并发控制技术"><a href="#并发控制技术" class="headerlink" title="并发控制技术"></a>并发控制技术</h3><h4 id="并发控制"><a href="#并发控制" class="headerlink" title="并发控制"></a>并发控制</h4><h5 id="事务并发的优点"><a href="#事务并发的优点" class="headerlink" title="事务并发的优点"></a>事务并发的优点</h5><ul>
<li>一个事务多个步骤并发执行，<strong>提高系统吞吐量</strong>。</li>
<li>如果各个事务涉及的是数据库的不同部分，采用并发会<strong>减少平均响应时间</strong>。</li>
</ul>
<h5 id="带来的问题"><a href="#带来的问题" class="headerlink" title="&#x3D;&#x3D;带来的问题&#x3D;&#x3D;"></a>&#x3D;&#x3D;带来的问题&#x3D;&#x3D;</h5><ul>
<li>多个事务同时存取同一数据时，不加以控制会读取或存取不正确的数据，破坏一致性。</li>
<li><strong>丢失更新</strong>：两个事务同时读入数据并修改，后面的事务会破坏前面事务的结果，导致前面事务的结果丢失。</li>
<li><strong>脏数据的读出</strong>：先前事务的结果被撤销，后面事务已经读出了错误的数据。</li>
<li><strong>不能重复读</strong>：一个事务读取后，另一个事务更新了数据，导致第一个事务不能再现结果。</li>
</ul>
<h5 id="并发控制的基本思想"><a href="#并发控制的基本思想" class="headerlink" title="并发控制的基本思想"></a>并发控制的基本思想</h5><p>&#x3D;&#x3D;合理调度并发事务，避免并发事务之间的互相干扰造成数据的不一致性。&#x3D;&#x3D;</p>
<p>&#x3D;&#x3D;主要方法是<strong>封锁机制</strong>&#x3D;&#x3D;。</p>
<h4 id="封锁"><a href="#封锁" class="headerlink" title="封锁"></a>封锁</h4><p>事务T在对某个数据如表、记录等操作之前，先向系统发出请求，对其加锁，从而对该数据对象有了一定的控制权。</p>
<h5 id="封锁的类型"><a href="#封锁的类型" class="headerlink" title="封锁的类型"></a>封锁的类型</h5><ul>
<li>排它锁（X锁）：上锁后，则只允许当前事务对数据对象进行读取和修改，直到释放锁。</li>
<li>共享锁（S锁）：上锁后可以读取但不能修改数据对象，其他事务只能加S锁，也不能加X锁，直到释放S锁。</li>
</ul>
<h5 id="封锁协议"><a href="#封锁协议" class="headerlink" title="封锁协议"></a>封锁协议</h5><p>运用两种基本封锁可以建立不同的约定，形成不同级别的封锁协议。</p>
<ul>
<li>一级封锁协议：防止丢失修改。在修改数据R之前加X锁，结束才可以释放。</li>
<li>二级封锁协议：防止读脏数据。一级封锁协议加上在读取R之前必须加S锁，读完释放S锁。</li>
<li>三级封锁协议：保证数据可以重复读。一级封锁协议加上读取R前必须加S锁，直到事务结束才可以释放。</li>
</ul>
<h5 id="封锁粒度"><a href="#封锁粒度" class="headerlink" title="封锁粒度"></a>封锁粒度</h5><p>封锁对象的大小称为封锁的粒度。</p>
<p>粒度大，则并发度低，封锁机构简单，开销小。</p>
<p>粒度小，则并发度高，封锁机构复杂，开销高。</p>
<p><strong>多粒度封锁</strong>：在一个系统中同时支持多种封锁粒度，选择封锁粒度时应同时考虑封锁开销和并发度两个因素。</p>
<p><strong>多粒度封锁协议</strong>：允许多粒度树中每个结点被单独加锁，对一个结点加锁意味着所有后裔结点也被加以同样类型的锁。</p>
<p>&#x3D;&#x3D;<strong>意向锁</strong>&#x3D;&#x3D;：该结点的下层结点正在被加锁，对任意结点加锁时，必须先对上级结点加意向锁。好处是，对象加锁时，不需要再检查下级结点的封锁。</p>
<h5 id="三种常用意向锁"><a href="#三种常用意向锁" class="headerlink" title="三种常用意向锁"></a>三种常用意向锁</h5><ul>
<li>意向共享锁（IS锁）：如果要对一个对象加IS锁，表示他的后裔结点拟加S锁。</li>
<li>意向排它锁（IX锁）：如果要对一个数据对象加IX锁，表示他的后裔结点拟加X锁。</li>
<li>意向共享排它锁（SIX锁）：如果要对一个数据对象加SIX锁，表示对它加S锁，再加IX锁。</li>
</ul>
<h5 id="活锁与死锁"><a href="#活锁与死锁" class="headerlink" title="&#x3D;&#x3D;活锁与死锁&#x3D;&#x3D;"></a>&#x3D;&#x3D;活锁与死锁&#x3D;&#x3D;</h5><ul>
<li>活锁：一个事务一直占用锁，后面可能一直等待，采用先来先服务法。</li>
<li>死锁：预防死锁，死锁检测与解除。</li>
<li>死锁预防：<ul>
<li>一次封锁法：要求每个事务必须一次将其所有要使用的数据全部加锁，否则就不能执行，降低了系统的并发度。</li>
<li>顺序封锁法：预先对数据对象规定一个封锁顺序，所有事务都按照这个顺序封锁，实现难度大。</li>
</ul>
</li>
<li>死锁检测：<ul>
<li>超时法：如果等待时间超过时限就认为发生死锁。</li>
<li>等待图法：图中有回路说明出现了死锁。</li>
</ul>
</li>
<li>死锁恢复：选择一个处理死锁代价最小的事务，将其撤销。</li>
</ul>
<h4 id="事务的调度"><a href="#事务的调度" class="headerlink" title="事务的调度"></a>事务的调度</h4><p>N个事务的一个调度S是N个事务所有操作的一个序列S，表示这些操作的执行顺序，并且这个序列满足，对每个事务T，如果操作i在事务T中先于操作k，则在S中i也先于操作k。</p>
<h4 id="并发调度正确性"><a href="#并发调度正确性" class="headerlink" title="并发调度正确性"></a>并发调度正确性</h4><ul>
<li>一个事务正常或者预想的结果是没有其他并行事务干扰时得到的结果，因此<strong>一组事务的串行调度策略一定是正确的调度策略</strong>。</li>
<li>各种结果都将保持数据库数据的一致性，所以都是正确的。</li>
</ul>
<h4 id="并发调度的可串行性"><a href="#并发调度的可串行性" class="headerlink" title="并发调度的可串行性"></a>并发调度的可串行性</h4><ul>
<li>可串行化：多个事务并发执行正确，当且仅当按某一次序串行执行它们时的结果相同，我们称这种调度策略为可串行化调度。</li>
<li>可串行性是并行事务正确性的准则，一个给定的并发调度，当且仅当它是可串行化的，才认为是正确调度。</li>
<li>一个调度Sc在保证冲突操作次序不变的情况下，可以通过交换两个事务不冲突操作的次序，得到另一个串行调度Sc’，则调度Sc为冲突可串行化调度。</li>
<li>两段锁协议可以保证并行事务的可串行性。<ul>
<li>内容：<ul>
<li>对任何数据进行读写操作之前，事务首先要获得对该数据的封锁。</li>
<li>在释放一个封锁之后，事务不再获得任何其他封锁。</li>
</ul>
</li>
<li>含义：事务分为两个阶段，第一个阶段获得封锁称为<strong>扩展阶段</strong>，第二阶段释放封锁，称为<strong>收缩阶段</strong>。</li>
<li>定理：若所有事务均遵从两段锁协议，则这些事务的所有并发调度都是可串行化的。</li>
<li>注意：遵守两段锁协议只是充分条件。遵守两段锁的事务仍然可能发生死锁。</li>
</ul>
</li>
</ul>
<h2 id="第八章-数据库保护"><a href="#第八章-数据库保护" class="headerlink" title="第八章 数据库保护"></a>第八章 数据库保护</h2><h3 id="安全性控制"><a href="#安全性控制" class="headerlink" title="安全性控制"></a>安全性控制</h3><ul>
<li>安全性：保护数据库以防止不合法的使用所造成的数据泄漏、更改和破坏。<ul>
<li>向授权用户提供可靠的信息服务。</li>
<li>拒绝对数据库的非授权存取访问请求，保证数据的可用性、完整性和一致性，进而保护数据库所有者和使用者的合法权益。</li>
</ul>
</li>
<li>安全性控制：包含数据库系统的计算机系统安全模型。<ul>
<li>用户标识与鉴别：用户标识和认证是系统提供的最外层安全保护措施。<ul>
<li>标识：系统采用一定的方式标识其用户或应用程序的名字或身份。</li>
<li>认证：系统在用户或应用程序登录时判断其是否为合法的授权用户。</li>
</ul>
</li>
</ul>
</li>
<li>存取控制：确保合法用户按照指定的权限使用DBMS和访问数据。<ul>
<li>用户权限定义</li>
<li>合法权限检查</li>
<li>上述两者一起组成了DBMS的安全子系统。</li>
</ul>
</li>
<li>存取控制方法分类<ul>
<li>&#x3D;&#x3D;自主存取控制（DAC）&#x3D;&#x3D;：用户对于不同数据对象有不同的存取权限，不同用户对同一对象也有不同的权限。<strong>用户还可以将其拥有的权限转授给其他用户</strong>。</li>
<li>&#x3D;&#x3D;强制存取控制（MAC）&#x3D;&#x3D;：对于任意一个对象，只有具有合法许可证的用户才可以存取。</li>
<li>对于用户存取权限的定义称为<strong>授权</strong>。在授权中应指明用户名、数据对象名、允许的操作对象类型。</li>
</ul>
</li>
<li>SQL可以授予用户的两类权限：<ul>
<li>用户级权限：DBA为每个用户授予特定权限，是对用户使用整个数据库权限的限定。</li>
<li>关系级权限：DBA和数据库对象的拥有者为用户授予的与关系或视图有关的权限，这种权限是对用户使用关系的视图权限的限定。</li>
<li>授权：GRANT option TO user，回收权限：REVOKE option ON user。</li>
</ul>
</li>
<li>角色与用户组<ul>
<li>角色是一组权限的集合。</li>
<li>用户组是一组具有相同特性用户的集合，可以在授权或收回权限时以用户组为单位进行。</li>
</ul>
</li>
<li>强制存取方法：MAC中全部实体被分为主体和客体。<ul>
<li>主体是系统中的活动实体，包括实际用户和代表用户的各进程。</li>
<li>客体是系统的被动实体，由主体操纵。</li>
<li>对于主客体，DBMS为每个实例指定一个<strong>敏感度标记（Label）</strong>。<strong>主体的敏感度标记称为许可证级别，客体的敏感度标记称为密级</strong>。</li>
<li>MAC机制通过对比主体的label和客体的label最终确定主体是否能够存取客体。</li>
<li>当某一主体以某一许可证级别注册入系统时，系统要求他对任何客体的存取必须遵循如下规则：<ul>
<li>只有当主体的许可证级别大于等于客体的密级时，主体才能读取相应客体。</li>
<li>仅当主体许可证级别等于客体的密级时，才可以写相应客体。</li>
</ul>
</li>
</ul>
</li>
<li>其他方法：<ul>
<li>视图机制</li>
<li>审计</li>
<li>数据加密</li>
</ul>
</li>
</ul>
<h3 id="完整性控制"><a href="#完整性控制" class="headerlink" title="完整性控制"></a>完整性控制</h3><ul>
<li>完整性：数据的正确性和相容性。<ul>
<li>正确性：数据应该具有合法类型，在有效取值范围内。</li>
<li>相容性：表示同一个事实的两个数据应该相同。</li>
<li>数据库是否保持完整性关系到数据库系统是否能真实反映现实世界。</li>
</ul>
</li>
<li>完整性约束条件：施加在数据库数据之上的语义约束条件称为数据库完整性约束条件。作用对象可以是<strong>列、元组和关系</strong>三种。</li>
<li>完整性约束条件分类：<ul>
<li><strong>静态约束</strong>：反应数据库状态合理性的约束。</li>
<li><strong>动态约束</strong>：反应数据库状态变迁的约束。</li>
</ul>
</li>
<li>完整性控制包括三个方面的功能：<ul>
<li>定义功能</li>
<li>检查功能</li>
<li>违约相应</li>
</ul>
</li>
<li>完整性检查时机：<ul>
<li>立即执行约束：在执行用户事务过程中，在一条语句执行完后立即进行完整性约束的检查。</li>
<li>延迟执行约束：整个用户事务执行完毕后，在进行完整性约束的检查。</li>
</ul>
</li>
<li>完整性规则表示：五元组<ul>
<li>D：数据对象。（工资）</li>
<li>O：触发完整性检查的数据库操作。（插入或修改）</li>
<li>A：数据库对象必须满足的断言或语义约束。（工资&gt;&#x3D;500000000）</li>
<li>C：选择A作用的数据对象值的谓词。（职称&#x3D;’老八’）</li>
<li>P：违反完整性规则时触发的过程。（拒绝执行该操作）</li>
</ul>
</li>
<li>SQL完整性：断言ASSERTION，触发器TRIGGER。</li>
</ul>
<h2 id="第九章-分布式数据库"><a href="#第九章-分布式数据库" class="headerlink" title="第九章 分布式数据库"></a>第九章 分布式数据库</h2><h3 id="分布式数据库系统"><a href="#分布式数据库系统" class="headerlink" title="分布式数据库系统"></a>分布式数据库系统</h3><ul>
<li>分布性：数据分布存储在网络的各个节点。</li>
<li>逻辑上的整体性：数据被一种机制联系在一起，构成一个有机整体。</li>
<li>分布式数据库定义：由一组分布在计算机网络的不同结点上的数据组成，每个结点具有独立处理的能力，可以执行局部应用，同时每个结点也可以通过网络通信支持全局应用。</li>
<li>场地自治性：每个场地有自己的数据库，一组终端（局部应用）。</li>
<li>自治场地之间的协作性：逻辑上如同一个集中式数据库，可以在任何场地执行全局应用。</li>
</ul>
<h3 id="分布式数据库系统的特点"><a href="#分布式数据库系统的特点" class="headerlink" title="分布式数据库系统的特点"></a>分布式数据库系统的特点</h3><ul>
<li>数据独立性：<ul>
<li>逻辑独立性</li>
<li>物理独立性</li>
<li>分布独立性：逻辑分片、数据物理位置的分布细节等与用户无关。</li>
</ul>
</li>
<li>集中与自治相结合的控制结构：<ul>
<li>数据共享分为局部共享和全局共享。</li>
<li>分布式数据库有自治功能，系统又设有集中控制结构。</li>
</ul>
</li>
<li>适当增加数据冗余：<ul>
<li>在不同结点存储同一个数据的多个副本。</li>
<li>提高系统可靠性、可用性。</li>
<li>提高系统性能。</li>
</ul>
</li>
<li>全局的一致性、可串行性和可恢复性</li>
</ul>
<h3 id="体系结构"><a href="#体系结构" class="headerlink" title="体系结构"></a>体系结构</h3><ul>
<li>全局外模式</li>
<li>全局概念模式</li>
<li>分片模式：<ul>
<li>分片方式：水平分片、垂直分片、导出分片、混合分片。</li>
<li>满足完全性、不相交性和可重构性。</li>
</ul>
</li>
<li>分布模式<ul>
<li>分布透明性：分片透明性、位置透明性、局部数据模型透明性。</li>
</ul>
</li>
<li>局部概念模式</li>
<li>局部内模式</li>
</ul>
<h3 id="DDBMS"><a href="#DDBMS" class="headerlink" title="DDBMS"></a>DDBMS</h3><p>组成</p>
<ul>
<li>LDBMS：局部场地上的数据库管理系统。</li>
<li>GDBMS：全局DBMS。</li>
<li>GDD：全局数据字典。</li>
<li>CM：通信管理。</li>
</ul>
<h3 id="主要技术"><a href="#主要技术" class="headerlink" title="主要技术"></a>主要技术</h3><h4 id="查询类型"><a href="#查询类型" class="headerlink" title="查询类型"></a>查询类型</h4><ul>
<li>局部查询：单结点</li>
<li>远程查询：单结点</li>
<li>全局查询：多个结点</li>
</ul>
<h4 id="处理过程"><a href="#处理过程" class="headerlink" title="处理过程"></a>处理过程</h4><ul>
<li>查询分解</li>
<li>选择操作执行的次序</li>
<li>选择执行操作的方法</li>
<li>使用半连接缩减关系。</li>
</ul>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Argithun</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://argithun.github.io/2023/01/01/db2/">https://argithun.github.io/2023/01/01/db2/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">Argithun</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">
                                    <span class="chip bg-color">数据库</span>
                                </a>
                            
                                <a href="/tags/SQL/">
                                    <span class="chip bg-color">SQL</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.jpg" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2023/01/02/db3/">
                    <div class="card-image">
                        
                        <img src="https://argithun-blog-1321510384.cos.ap-beijing.myqcloud.com/db3_1.png" class="responsive-img" alt="云数据库实验">
                        
                        <span class="card-title">云数据库实验</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            云数据库实验报告
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2023-01-02
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" class="post-category">
                                    数据库
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93/">
                        <span class="chip bg-color">云数据库</span>
                    </a>
                    
                    <a href="/tags/GaussDB/">
                        <span class="chip bg-color">GaussDB</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2022/12/10/CO_P8/">
                    <div class="card-image">
                        
                        <img src="https://argithun-blog-1321510384.cos.ap-beijing.myqcloud.com/CO8.jpg" class="responsive-img" alt="2022北航计算机组成原理 Project 8">
                        
                        <span class="card-title">2022北航计算机组成原理 Project 8</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            MIPS微系统设计文档
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-12-10
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/" class="post-category">
                                    体系结构
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90/">
                        <span class="chip bg-color">计算机组成</span>
                    </a>
                    
                    <a href="/tags/Verilog/">
                        <span class="chip bg-color">Verilog</span>
                    </a>
                    
                    <a href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/">
                        <span class="chip bg-color">嵌入式</span>
                    </a>
                    
                    <a href="/tags/FPGA/">
                        <span class="chip bg-color">FPGA</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    

</main>


<script src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$', '$'], ['\(', '\)']]}
    });
</script>



    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2023-2024</span>
            
            <span id="year">2023</span>
            <a href="/about" target="_blank">Argithun Pan</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/Argithun" target="_blank">Matery</a>
            <br>
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/Argithun" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:21371249@buaa.edu.cn" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>





    <a href="https://twitter.com/Vanthon1024" class="tooltipped" target="_blank" data-tooltip="关注我的Twitter: https://twitter.com/Vanthon1024" data-position="top" data-delay="50">
        <i class="fab fa-twitter"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=3063559416" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 3063559416" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

	
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
